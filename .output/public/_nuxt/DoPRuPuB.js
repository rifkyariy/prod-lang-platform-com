import{_ as Q}from"./BzDEtBN7.js";import{_ as W}from"./DKN0q9jN.js";import{_ as G}from"./BNtHcZP4.js";import{_ as J,a as X}from"./t4TcopXV.js";import{_ as Y}from"./CrKBm7Us.js";import{f as Z,r,g as D,h as tt,c as l,b as s,w as o,i as u,j as et,o as n,a as i,t as c,k as A,d as h,l as L,m as B,n as at,p as ot}from"./XJk57Xzm.js";import{_ as st}from"./Y9Pqjzqe.js";import{_ as nt}from"./7oWaGxPY.js";import{u as lt}from"./D42cKZAL.js";import"./BQdhZYq_.js";import"./DKK-teFl.js";import"./Y56T3AGQ.js";import"./DEmq8X_o.js";import"./B4_BqFOv.js";import"./viV4BwKR.js";const it={class:""},ct={class:"w-full pt-0 p-6 flex flex-col gap-2"},rt={class:"flex gap-2"},dt={class:"flex items-center gap-2"},ut={class:"text-primary font-semibold truncate max-w-40 cursor-pointer"},pt={key:0,class:"flex flex-col gap-1 items-start capitalize"},_t={class:"text-primary font-semibold"},mt={class:"text-gray-600 max-w-72 text-sm truncate cursor-pointer"},gt={key:1,class:"text-gray-300"},ft={key:0,class:"flex flex-col gap-1 items-start capitalize"},xt={class:"text-primary font-semibold"},vt={class:"text-accent"},yt={class:"text-gray-500"},ht={key:1,class:"text-gray-300"},kt={key:0,class:"flex flex-col gap-1 items-start capitalize"},bt={class:"text-primary font-semibold flex flex-col gap-1 items-start"},Dt={key:1,class:"text-gray-300"},At={key:2,class:"text-gray-300"},Ct={key:0,class:"flex flex-col gap-1 items-start capitalize"},Pt={key:1,class:"text-gray-300"},Vt={key:0,class:"flex flex-col gap-1 items-start capitalize"},Ut={key:1,class:"text-gray-300"},St={class:"flex gap-1"},wt="Advertisement List",Qt={__name:"ads",setup(It){const{getAllAds:M,updateAdsStatus:N}=lt(),C=Z(),P=r(!0),k=r(!1),V=r({title:"",message:"",callback:null});r([]);const U=r([]),p=r({label:"All",value:"all"}),_=r(""),m=r(1),v=r({page:1,totalPage:1,totalItems:0,itemsPerPage:10}),O=[{label:"All",value:"all",color:"gray"},{label:"Completed",value:"completed",color:"orange"},{label:"Paid",value:"paid",color:"blue"},{label:"Pending",value:"pending",color:"orange"},{label:"Waiting Payment",value:"waitingpaid",color:"orange"},{label:"Failed",value:"failed",color:"orange"}],g=async()=>{try{await M({page:m.value,per_page:v.value.itemsPerPage,order_status:p.value.value==="all"?"":p.value.value,search:_.value}).then(a=>{U.value=a.data.data.advertisements.data.map((e,d)=>({no:d+1,title:e.name,content:{image_url:e.image_url,tagline:e.tagline,description:e.description},package:e.package,valid:e.valid_until_date,payment:e.payment_file_url,status:e.status,actions:{id:e.id,status:e.status}})),v.value.totalPage=a.data.data.advertisements.last_page,v.value.totalItems=a.data.data.advertisements.total})}catch(a){console.error("Error fetching merchant advertisements:",a)}finally{P.value=!1}},S=async(a,e)=>{await N(a,{status:e}).then(()=>{k.value=!1,C.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Advertisement status updated!"}),g()}).catch(d=>{console.error("Error updating advertisement status:",d),C.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:"Error updating advertisement status!"})})};D(m,g),D(p,()=>{g()},{deep:!0}),D(_,at(()=>{g()},300),{deep:!0});const $=a=>{window.open(a,"_blank")},K=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a),E=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),F=a=>{const e=new Date,f=new Date(a)-e;return Math.ceil(f/(1e3*60*60*24))},w=a=>a==="verified"||a==="active"?"blue":a==="pending"?"orange":"gray",I=(a,e,d,f,x)=>{V.value={title:a,content:e,confirmText:d,cancelText:f,callback:x},k.value=!0};return tt(()=>{g()}),(a,e)=>{const d=Q,f=W,x=G,y=J,T=Y,b=ot,H=st,j=X,q=et,R=nt;return n(),l("div",it,[s(q,{name:"admin"},{default:o(()=>[i("div",ct,[s(x,{ui:{body:{base:"flex justify-between items-center",background:"",padding:"p-2 sm:p-4"}}},{default:o(()=>[i("h6",{class:"font-semibold"},c(wt)),i("div",rt,[s(d,{options:O,modelValue:u(p),"onUpdate:modelValue":e[0]||(e[0]=t=>A(p)?p.value=t:null),placeholder:"Pilih Status",by:"value","option-attribute":"label","search-attributes":["label"],class:"max-w-[180px]"},null,8,["modelValue"]),s(f,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Ads Transactions",modelValue:u(_),"onUpdate:modelValue":e[1]||(e[1]=t=>A(_)?_.value=t:null)},null,8,["modelValue"])])]),_:1}),s(x,{ui:{body:{base:"flex flex-col gap-4"}}},{default:o(()=>[s(H,{rows:u(U),loading:u(P),"loading-state":{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."}},{"title-data":o(({row:t})=>[i("div",dt,[s(y,{text:t.title,popper:{arrow:!0},ui:{base:"[@media(pointer:coarse)]:hidden h-full px-1 py-1 text-xs font-normal text-wrap text-center"}},{default:o(()=>[i("span",ut,c(t.title),1)]),_:2},1032,["text"])])]),"content-data":o(({row:t})=>[t.content?(n(),l("div",pt,[i("span",_t,c(t.content.tagline),1),s(y,{text:t.content.description,popper:{arrow:!0},ui:{base:"[@media(pointer:coarse)]:hidden h-full px-2 py-1 text-xs font-normal text-wrap text-center"}},{default:o(()=>[i("p",mt,c(t.content.description),1)]),_:2},1032,["text"])])):(n(),l("span",gt," Kosong "))]),"package-data":o(({row:t})=>[t.package?(n(),l("div",ft,[i("span",xt,c(t.package.name),1),i("span",vt,c(K(t.package.price)),1),i("span",yt,c(t.package.duration)+" bulan ",1)])):(n(),l("span",ht," Kosong "))]),"valid-data":o(({row:t})=>[t.valid?(n(),l("div",kt,[i("span",bt,[h(" Sampai "+c(E(t.valid))+" ",1),s(T,{color:w(t.status),class:"text-xs",variant:"soft"},{default:o(()=>[h(c(F(t.valid))+" Hari Lagi ",1)]),_:2},1032,["color"])])])):t.status==="inactive"?(n(),l("span",Dt," Iklan Tidak Aktif ")):(n(),l("span",At," Kosong "))]),"payment-data":o(({row:t})=>[t.payment?(n(),l("div",Ct,[s(b,{onClick:z=>$(t.payment)},{default:o(()=>e[3]||(e[3]=[h(" Bukti transfer ")])),_:2},1032,["onClick"])])):(n(),l("span",Pt," Kosong "))]),"status-data":o(({row:t})=>[t.status?(n(),l("div",Vt,[s(T,{color:w(t.status),class:"text-xs",variant:"soft"},{default:o(()=>[h(c(t.status),1)]),_:2},1032,["color"])])):(n(),l("span",Ut," Kosong "))]),"actions-data":o(({row:t})=>[i("div",St,[t.actions.status==="pending"||t.actions.status==="inactive"?(n(),L(y,{key:0,text:"Accept Ads Payment"},{default:o(()=>[s(b,{icon:"i-heroicons-check",size:"2xs",color:"green",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:z=>{I("Hang On","Are you sure you want to activate this advertisement?","Activate","Cancel",()=>{S(t.actions.id,"active")})}},null,8,["onClick"])]),_:2},1024)):B("",!0),t.actions.status==="active"?(n(),L(y,{key:1,text:"Deactivate Ads"},{default:o(()=>[s(b,{icon:"i-heroicons-trash",size:"2xs",color:"orange",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:z=>{I("Hang On","Are you sure you want to deactivate this advertisement?","Deactivate","Cancel",()=>{S(t.actions.id,"inactive")})}},null,8,["onClick"])]),_:2},1024)):B("",!0)])]),_:1},8,["rows","loading"]),s(j,{modelValue:u(m),"onUpdate:modelValue":e[2]||(e[2]=t=>A(m)?m.value=t:null),"page-count":1,total:u(v).totalPage},null,8,["modelValue","total"])]),_:1})])]),_:1}),s(R,{isOpen:u(k),data:u(V)},null,8,["isOpen","data"])])}}};export{Qt as default};
