import{_ as le}from"./CizdsbHW.js";import{x as ae,f as ie,D as re,r as M,Q as ue,h as de,o as a,c,a as t,b as s,w as j,i as l,l as h,m,q as p,t as k,d as x,z as W,a4 as I,F as ce,s as me,G as xe,e as ge,v as fe,p as pe}from"./BEkH225l.js";import{_ as ye}from"./DswlE1Sz.js";import{u as be,_ as ve}from"./u12rnr9u.js";const he=()=>{const{$axios:i}=ae();return{getMyNotifications(d){return d={page:1,per_page:10,...d},Object.keys(d).forEach(y=>{(d[y]===null||d[y]===""||d[y]===void 0)&&delete d[y]}),i.get("/my/notifications",{params:d})},markAsRead(d){return i.patch(`/my/notifications/${d}/mark-as-read`)},markAllAsRead(){return i.patch("/my/notifications/mark-all-as-read")},deleteNotification(d){return i.delete(`/my/notifications/${d}`)}}},ke={class:"absolute px-4 sm:px-24 top-6 w-full z-50"},we={class:"bg-white rounded-full shadow min-w-full"},Ce={class:"flex justify-between h-16 px-8 sm:px-8"},$e={class:"flex gap-4 items-center"},Me={class:"flex-shrink-0 flex items-center align-middle"},Ne={class:"md:hidden flex items-center gap-3"},Se={key:0,class:"absolute top-4 bg-red-600 text-white text-xs px-2 ml-1 rounded-full z-20"},ze={class:"hidden md:flex sm:items-center sm:space-x-8 justify-between"},_e={key:0,class:"flex items-center gap-2"},qe={key:1,class:"flex items-center gap-2"},je={key:0,class:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-accent rounded-full"},Ae={key:0,class:"absolute top-4 bg-red-600 text-white text-xs px-2 ml-1 rounded-full z-20"},Fe={class:"mx-2 capitalize"},Oe={key:0,class:"md:hidden bg-white rounded-lg mt-2 z-50 shadow-md"},Be={class:"px-2 pt-2 pb-3 space-y-1 rounded-none"},De={key:0,class:"flex flex-col space-y-2"},Re={key:1,class:"flex flex-col space-y-2"},Ue={class:"flex justify-between px-4 items-center border-b border-gray-200"},Ve=["onClick"],He={class:"flex flex-col items-start"},Le={class:"text-left"},Te={class:"text-xs text-gray-400 mt-1"},Ee={key:0,class:"flex justify-center items-center h-12"},Je={__name:"Navbar",props:{user:{type:Object,default:null}},emits:["update"],setup(i,{emit:d}){const{getMyNotifications:y,markAsRead:J,markAllAsRead:K}=he(),g=be(),A=()=>{g.toggleChat()},X=ie(),N=re(),Y=i,S=M([]),F=ue(()=>S.value.filter(u=>!u.is_read)),b=M(!1),f=M(!1),z=M(!1),_=M(!1),Z=d,r=u=>{N.push(u),console.log("path",u)},O=()=>{f.value=!f.value,z.value=!1,b.value=!1},ee=()=>{b.value=!b.value,f.value=!1},te=()=>{z.value=!z.value,b.value=!1,f.value=!1},B=()=>{const u=xe("token");u.value=null,b.value=!1,Z("logout"),X.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Successfully signed out!"}),N.currentRoute.value.name!=="index"&&N.push({name:"auth-login"}),g.closeChat()},se=async()=>{try{await K(),R()}catch(u){console.log("error",u)}},ne=(u,e)=>{J(u),N.push(e)},D=()=>{_.value=window.innerWidth<900},R=async()=>{if(Y.user)try{const u=await y({page:1,limit:5});S.value=u.data.data.notifications}catch(u){console.log("error",u)}},oe=u=>{const e=new Date(u),w=new Date-e,q=Math.floor(w/1e3),v=Math.floor(q/60),C=Math.floor(v/60),$=Math.floor(C/24);return $>0?`${$}d ago`:C>0?`${C}h ago`:v>0?`${v}m ago`:`${q}s ago`};return de(()=>{D(),window.addEventListener("resize",D),R()}),(u,e)=>{var $,U,V,H,L,T,E,P,G,Q;const n=le,w=ge,q=fe,v=ye,C=pe;return a(),c("div",ke,[t("nav",we,[t("div",Ce,[t("div",$e,[s(w,{to:{name:"index"},class:"flex-shrink-0 flex items-center align-middle"},{default:j(()=>[t("div",Me,[s(n,{name:"logo",class:"text-primary text-3xl"}),e[19]||(e[19]=t("span",{class:"text-primary ml-2"},"gointerling",-1))])]),_:1}),l(_)?m("",!0):(a(),h(w,{key:0,to:{name:"facilitators"},class:"inline-flex items-center px-1 font-semibold border-primary text-gray-900 focus:outline-none focus:border-blue-900 transition duration-150 ease-in-out"},{default:j(()=>e[20]||(e[20]=[t("span",{class:"text-gray-900"}," Facilitators List ",-1)])),_:1}))]),t("div",Ne,[t("button",{onClick:e[0]||(e[0]=o=>r({name:"admin-dashboard",query:{as:"admin"}}))},[(($=i.user)==null?void 0:$.is_admin)===1?(a(),h(n,{key:0,name:"admin",class:"text-2xl",filled:""})):m("",!0)]),t("button",{onClick:e[1]||(e[1]=o=>r({name:"packages"}))},[s(n,{name:"badge",class:"text-2xl",filled:""})]),t("button",{onClick:e[2]||(e[2]=o=>r({name:"my-client-orders",query:{section:"order-history"}}))},[s(n,{name:"order",class:"text-2xl",filled:""})]),t("button",{onClick:O,class:p(l(f)?"bg-primary text-white p-2 rounded-full":"p-2")},[s(n,{name:"notification",class:p(["text-xl",l(f)?"text-white":"text-primary"])},null,8,["class"])],2),t("button",{onClick:A},[s(n,{name:"chat",class:"text-2xl",filled:""}),l(g).unreadMessages>0?(a(),c("span",Se,k(l(g).unreadMessages>10?"":l(g).unreadMessages),1)):m("",!0)]),t("button",{onClick:te,class:"text-gray-900 focus:outline-none"},[s(n,{name:"menu",class:"text-lg text-primary"})])]),t("div",ze,[i.user?(a(),c("div",qe,[t("button",{class:"p-2 rounded-full",onClick:e[5]||(e[5]=o=>r({name:"admin-dashboard",query:{as:"admin"}}))},[i.user.is_admin===1?(a(),h(n,{key:0,name:"admin",class:"text-2xl",filled:""})):m("",!0)]),t("button",{class:"p-2 rounded-full",onClick:e[6]||(e[6]=o=>r({name:"packages"}))},[s(n,{name:"badge",class:"text-2xl",filled:""})]),t("button",{class:"p-2 rounded-full",onClick:e[7]||(e[7]=o=>r({name:"my-client-orders",query:{section:"order-history"}}))},[s(n,{name:"order",class:"text-2xl",filled:""})]),t("button",{onClick:O,class:p(l(f)?"bg-primary text-white p-2 rounded-full relative":"p-2 relative")},[s(n,{name:"notification",class:p(["text-2xl",l(f)?"text-white":"text-primary"])},null,8,["class"]),l(F).length>0?(a(),c("span",je,k(l(F).length),1)):m("",!0)],2),t("button",{onClick:A},[s(n,{name:"chat",class:"text-2xl",filled:""}),l(g).unreadMessages>0?(a(),c("span",Ae,k(l(g).unreadMessages>10?"New":l(g).unreadMessages),1)):m("",!0)]),t("button",{onClick:ee,class:"flex items-center text-sm font-medium text-gray-900 rounded-full focus:outline-none focus:shadow-outline ml-4"},[s(q,{alt:(U=i.user)==null?void 0:U.fullname,src:(V=i.user)==null?void 0:V.photo,size:"sm",imgClass:"object-cover"},null,8,["alt","src"]),t("span",Fe,k((H=i.user)==null?void 0:H.fullname),1),s(n,{name:"chevron-simple-down",class:"mx-4",filled:""})])])):(a(),c("div",_e,[t("button",{class:"px-4 py-2 text-sm font-medium text-white bg-accent rounded-lg hover:bg-accent-700 focus:outline-none focus:bg-accent-500 transition duration-150 ease-in-out",onClick:e[3]||(e[3]=o=>r({name:"auth-login",query:{as:"user"}}))}," Sign in as User "),t("button",{class:"px-4 py-2 text-sm font-medium text-accent border border-accent rounded-lg hover:bg-accent-700 focus:outline-none focus:bg-accent-500 transition duration-150 ease-in-out",onClick:e[4]||(e[4]=o=>r({name:"auth-login",query:{as:"facilitator"}}))}," Sign in as Facilitator ")]))])])]),l(z)?(a(),c("div",Oe,[t("div",Be,[i.user?(a(),c("div",Re,[s(w,{to:{name:"facilitators"},class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},{default:j(()=>[s(n,{name:"user-group",class:"text-2xl"}),e[21]||(e[21]=x(" Facilitators List "))]),_:1}),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[10]||(e[10]=o=>r({name:"profile"}))},[s(n,{name:"user-circle",class:"text-2xl"}),e[22]||(e[22]=x(" Profile "))]),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[11]||(e[11]=o=>r({name:"index"}))},[s(n,{name:"home",class:"text-2xl"}),e[23]||(e[23]=x(" Home "))]),t("button",{onClick:e[12]||(e[12]=o=>r({name:"my-client-orders",query:{section:"order-history"}})),class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[s(n,{name:"history",class:"text-2xl"}),e[24]||(e[24]=x(" Order History "))]),(L=i.user)!=null&&L.is_facilitator?(a(),c("button",{key:0,class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[13]||(e[13]=o=>r({name:"my-merchant-dashboard"}))},[s(n,{name:"merchant",class:"text-2xl"}),e[25]||(e[25]=x(" Facilitator ")),((T=i.user)==null?void 0:T.merchant_status)==="pending"?(a(),h(v,{key:0,color:"orange",label:(E=i.user)==null?void 0:E.merchant_status,variant:"soft",class:"uppercase"},null,8,["label"])):m("",!0)])):m("",!0),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",href:"#",onClick:B},[s(n,{name:"logout",class:"text-2xl"}),e[26]||(e[26]=x(" Sign out "))])])):(a(),c("div",De,[t("button",{class:"px-4 py-2 text-sm font-medium text-white bg-accent rounded-lg hover:bg-accent-700 focus:outline-none focus:bg-accent-500 transition duration-150 ease-in-out",onClick:e[8]||(e[8]=o=>r({name:"auth-login",query:{as:"user"}}))}," Sign in as User "),t("button",{class:"px-4 py-2 text-sm font-medium text-accent border border-accent rounded-lg hover:bg-accent-700 focus:outline-none focus:bg-accent-500 transition duration-150 ease-in-out",onClick:e[9]||(e[9]=o=>r({name:"auth-login",query:{as:"facilitator"}}))}," Sign in as Facilitator ")]))])])):m("",!0),W(t("div",{class:p(l(_)?"mt-2 bg-white rounded-lg shadow-lg z-10":"absolute right-24 z-10 mt-2 w-96 py-1 bg-white rounded-lg shadow-lg")},[t("div",Ue,[e[28]||(e[28]=t("span",{class:"uppercase text-primary font-semibold"},"Notifications",-1)),s(C,{variant:"link",color:"red",onClick:e[14]||(e[14]=o=>se())},{default:j(()=>e[27]||(e[27]=[x(" Mark all as read ")])),_:1})]),(a(!0),c(ce,null,me(l(S),o=>(a(),c("button",{class:p(["w-full flex justify-start gap-2 align-middle items-start px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 border-b border-gray-200",o.is_read?"bg-white":"bg-gray-100"]),key:o.id,onClick:Pe=>ne(o.id,o.notification_link)},[o.is_read?m("",!0):(a(),h(n,{key:0,name:"circle-badge",class:"text-accent text-xs mt-1"})),t("div",He,[t("span",Le,k(o.notification),1),t("span",Te,k(oe(o.created_at)),1)])],10,Ve))),128)),l(S).length===0?(a(),c("div",Ee,e[29]||(e[29]=[t("span",{class:"text-gray-400"},"No notifications",-1)]))):m("",!0)],2),[[I,l(f)]]),W(t("div",{class:p(l(_)?"z-10 mt-2 w-58 py-1 bg-white rounded-lg shadow-lg":" absolute right-24 z-12  w-58 py-1 bg-white rounded-lg shadow-lg")},[t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[15]||(e[15]=o=>r({name:"profile"}))},[s(n,{name:"user-circle",class:"text-2xl"}),e[30]||(e[30]=x(" Profile "))]),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[16]||(e[16]=o=>r({name:"index"}))},[s(n,{name:"home",class:"text-2xl"}),e[31]||(e[31]=x(" Home "))]),t("button",{onClick:e[17]||(e[17]=o=>r({name:"my-client-orders",query:{section:"order-history"}})),class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},[s(n,{name:"history",class:"text-2xl"}),e[32]||(e[32]=x(" Order History "))]),(P=i.user)!=null&&P.is_facilitator?(a(),c("button",{key:0,class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:e[18]||(e[18]=o=>r({name:"my-merchant-dashboard"}))},[s(n,{name:"merchant",class:"text-2xl"}),e[33]||(e[33]=x(" Facilitator ")),((G=i.user)==null?void 0:G.merchant_status)==="pending"?(a(),h(v,{key:0,color:"orange",label:(Q=i.user)==null?void 0:Q.merchant_status,variant:"soft",class:"uppercase"},null,8,["label"])):m("",!0)])):m("",!0),t("button",{class:"w-full flex gap-2 align-middle items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",href:"#",onClick:B},[s(n,{name:"logout",class:"text-2xl"}),e[34]||(e[34]=x(" Sign out "))])],2),[[I,l(b)]]),s(ve,{"is-chat-show":l(g).isChatOpen},null,8,["is-chat-show"])])}}};export{Je as _};
