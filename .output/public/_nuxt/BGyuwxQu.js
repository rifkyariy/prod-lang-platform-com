import{_ as ce}from"./B6lnNECk.js";import{_ as de}from"./C0jI5ihE.js";import{_ as ue}from"./CD4wQP0o.js";import{f as Y,r as p,o as c,c as d,a as t,b as r,t as l,m as h,q as J,D as me,E as pe,g as q,h as fe,G as M,i as a,l as N,w as y,d as j,H as xe,p as ge,I as _e,C as ve}from"./BEkH225l.js";import{_ as K}from"./CizdsbHW.js";import{_ as ye}from"./Bk0utM0A.js";import{_ as he}from"./DswlE1Sz.js";import{_ as we}from"./DZJ46zT2.js";import{u as ke}from"./x_mdr1ZB.js";import{u as be}from"./4DJRK2Gx.js";import{u as Ue}from"./CQA2cOXQ.js";import{P as Fe}from"./BP8UTi2G.js";import{_ as Se}from"./Bizv0OyU.js";import{_ as Pe}from"./BCY4xd7K.js";import"./DJQezgFW.js";import"./DwxjmMYL.js";import"./Bk5CjwjX.js";import"./E4AWPTk2.js";import"./u12rnr9u.js";const Ce=["accept"],$e={key:0,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200 w-full"},je={key:1},Ae={class:"text-primary group-hover:text-white transition duration-200"},Be={key:2,class:"mt-2 text-gray-700 text-xs"},Ve={key:3,class:"mt-2 text-red-500 text-xs"},ze={__name:"FileUploadInline",props:{title:{type:String,default:"File"},accept:{type:String,default:""},maxSize:{type:Number,default:0},isDisplayFile:{type:Boolean,default:!0},center:{type:Boolean,default:!1}},emits:["fileUploaded"],setup(b,{emit:z}){const{uploadFile:D,deleteFile:I}=ke(),U=b,F=Y(),T=z,f=p(null),u=p(""),x=p(""),_=p(null),S=p(!1),$=()=>{f.value.click()},v=()=>{const n=f.value.files[0];n&&(u.value=n.name,U.maxSize&&n.size>U.maxSize?(x.value=`File size exceeds the limit of ${w(U.maxSize/1024/1024,2)} MB.`,u.value=""):(x.value="",o(n,`${U.title}_${n.name}`)))},P=()=>{f.value.value=null,u.value="",x.value="",O(_.value)},w=(n,m)=>+(Math.round(n+"e"+m)+"e-"+m),o=(n,m)=>{S.value=!0,D(n,m).then(g=>{S.value=!1,_.value=g.data.data.fileRecord,C(g.data.data.fileRecord.url),console.log("File uploaded:",g.data.data.fileRecord.url),F.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File uploaded successfully!"})}).catch(g=>{console.error(g),F.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:A(g.response.data.error)})})},O=n=>{I(n.id).then(()=>{C(""),F.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File deleted successfully!"})}).catch(m=>{console.error(m),F.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:A(m.response.data.error)})})},C=n=>{T("fileUploaded",n)},A=n=>n.errors?n.errors[Object.keys(n.errors)[0]][0]:n.message;return(n,m)=>{const g=K;return c(),d("div",{class:J(["file-upload inline-block",b.center?"flex flex-col items-center":""])},[t("input",{ref_key:"fileInput",ref:f,type:"file",accept:b.accept,class:"hidden",onChange:v},null,40,Ce),S.value?(c(),d("button",$e,m[0]||(m[0]=[t("span",{class:"text-primary group-hover:text-white transition duration-200"}," Uploading... ",-1)]))):(c(),d("div",je,[u.value?h("",!0):(c(),d("button",{key:0,onClick:$,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200 w-full"},[r(g,{name:"file-upload",class:"text-primary group-hover:text-white transition duration-200"}),t("span",Ae," Upload "+l(b.title),1)])),u.value?(c(),d("button",{key:1,onClick:P,class:"px-4 py-2 border border-red-800 rounded-lg hover:bg-red-800 flex items-center gap-1 group transition duration-200 w-full"},[r(g,{name:"circle-x",class:"text-red-800 group-hover:text-white transition duration-200 mb-0 pb-0"}),m[1]||(m[1]=t("span",{class:"text-red-800 group-hover:text-white transition duration-200"}," Cancel ",-1))])):h("",!0)])),u.value&&b.isDisplayFile?(c(),d("p",Be," Selected file: "+l(u.value),1)):h("",!0),x.value?(c(),d("p",Ve,l(x.value),1)):h("",!0)],2)}}},De=""+new URL("back-ads.CbXaGjBo.svg",import.meta.url).href,Ie={class:"min-h-screen flex flex-col"},Te={key:1,class:"flex flex-col h-screen"},Oe={key:0,class:"flex flex-col px-8 sm:px-40"},Re={class:"flex flex-col gap-4 p-8 sm:px-32 rounded-md"},qe={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Me={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Ne={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Ee={class:"w-full sm:w-10/12"},Le={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},Ge={class:"flex gap-1 items-center"},He={class:"truncate"},We={class:"flex justify-start gap-2 py-2 px-2"},Qe={class:""},Xe={class:"flex flex-col"},Ye={class:"truncate"},Je={class:"truncate"},Ke={class:"truncate"},Ze={class:"truncate"},et={class:"truncate"},tt={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center"},st={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-end"},ot={key:1},at={class:"flex flex-col md:flex-row gap-8 p-8 sm:px-24 rounded-md w-full justify-center"},lt={class:"flex gap-4 flex-col"},nt=["src"],it={class:"absolute top-0 left-0 w-full h-full flex flex-col justify-between p-6 transition-opacity duration-300 ease-in-out opacity-0 hover:opacity-100 bg-gradient-to-r from-transparent via-transparent via-10% to-primary rounded-lg z-10"},rt={class:"w-full h-full"},ct={class:"flex justify-end"},dt={class:"flex flex-col justify-center items-end h-full"},ut={class:"h-full flex flex-col items-end justify-center pb-6"},mt={class:"text-white text-xl font-bold text-right pb-4"},pt={class:"text-white text-sm max-w-sm text-right"},ft={key:0,class:"w-full flex items-start justify-start flex-col gap-1"},xt={class:"h-full flex items-start justify-start flex-col gap-1 mt-2"},gt={class:"font-semibold text-primary text-lg"},_t={class:"font-semibold text-primary text-lg"},vt={class:"font-semibold text-primary text-lg"},yt={class:"text-primary text-sm"},ht={class:"font-semibold text-primary text-lg"},wt={key:1,class:"w-full flex items-start justify-start flex-col gap-1"},kt={class:"h-full flex items-start justify-start flex-col gap-1 mt-2 flex-grow"},bt={class:"font-semibold text-primary text-lg"},Ut={class:"font-thin text-primary text-sm"},Ft={class:"font-bold text-primary text-md text-xl flex gap-2 items-center py-2 capitalize"},St={class:"uppercase"},Pt={class:"font-thin text-primary text-sm"},Ct={key:0,class:"flex gap-2"},$t={key:2,class:"text-xs text-gray-500 max-w-xs"},Xt={__name:"setup",setup(b){const{getAdsPackages:z,setMyAds:D,getAdsDetail:I,updateMyAdsProofOfPayment:U}=be(),{getSettingBank:F}=Ue(),T=me(),f=pe(),u=Y();p(f.params.id);const x=p(!0),_=p(!1),S=p(!0),$=p(null),v=p("fill-data"),P=p([]),w=p(null),o=p({name:null,tagline:null,description:null,package:{},image_url:null,status:"pending"});q(()=>o.value.description,s=>{o.value.description=O(s,50)}),q(()=>v.value,s=>{T.push({query:{...f.query,section:s}})}),q(()=>o.value,()=>{S.value=!(o.value.name&&o.value.tagline&&o.value.description&&o.value.package&&o.value.image_url)},{deep:!0});const O=(s,e)=>{const k=s.split(/\s+/);return k.length>e?k.slice(0,e).join(" "):s},C=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(s),A=s=>{navigator.clipboard.writeText(s),u.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"Bank Account copied to clipboard!"})},n=s=>{o.value.image_url=s},m=async()=>{try{$.value=M("token").value.user||null}catch(s){console.error("Fetching user failed:",s)}},g=()=>{M("token").value=null,$.value=null},Z=()=>{f.query.section?v.value=f.query.section:v.value="fill-data"},R=s=>s.errors?s.errors[Object.keys(s.errors)[0]][0]:s.message,E=s=>{switch(s){case"active":return{color:"green",text:"Active"};case"inactive":return{color:"gray",text:"Inactive"};case"pending":return{color:"orange",text:"Pending"};default:return{color:"gray",text:"Unknown"}}},ee=async()=>{try{const{data:s}=await z();P.value=s.data.packages,o.value.package=P.value[0]}catch(s){console.error(s),u.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:R(s.response.data.error)})}},te=async()=>{try{const{data:s}=await F();w.value=s.data.setting}catch(s){console.error("Error fetching merchant orders:",s)}finally{x.value=!1}},L=async s=>{x.value=!0;try{const{data:e}=await I(s);o.value={...e.data.advertisement,package:P.value.find(k=>k.id===e.data.advertisement.package_id)},e.data.advertisement.payment_file_url&&e.data.advertisement.status==="pending"&&(_.value=!0)}catch(e){console.error("Error fetching ads detail:",e)}finally{x.value=!1}},se=async()=>{await D({...o.value,package_id:o.value.package.id}).then(s=>{o.value.id=s.data.data.advertisement.id,f.query.transaction_id=s.data.data.advertisement.id,v.value="payment",u.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Please continue to the payment process!"})}).catch(s=>{console.error(s),u.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:R(s.response.data.error)})})},oe=s=>{U(o.value.id,{payment_file_url:s}).then(()=>{u.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Proof of payment uploaded successfully!"}),_.value=!0,L(o.value.id)}).catch(e=>{console.error(e),u.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:R(e.response.data.error)})})};return fe(async()=>{if(M("token").value&&await m(),Z(),await ee(),await te(),f.query.section==="payment"){const s=f.query.transaction_id;await L(s)}x.value=!1}),(s,e)=>{var W,Q,X;const k=ce,ae=de,le=ue,B=ge,G=K,ne=ye,ie=he,H=ve,re=we;return c(),d("div",Ie,[a(x)?(c(),N(Fe,{key:0})):(c(),d("div",Te,[r(Se,{user:a($),onLogout:g},null,8,["user"]),r(Pe,{"is-title-visible":!0,"banner-title":"Advertising Form on Gointerling Website",class:"min-h-[250px] pt-44 sm:pt-60"}),t("div",{class:"flex-grow p-6 lg:px-36 flex flex-col gap-6 bg-no-repeat bg-cover bg-bottom mt-8",style:xe({backgroundImage:`url(${a(De)})`})},[a(v)==="fill-data"?(c(),d("section",Oe,[t("div",Re,[t("div",qe,[e[8]||(e[8]=t("span",{class:"flex-grow font-medium text-left sm:text-right"},"Name",-1)),r(k,{modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=i=>a(o).name=i),class:"w-full sm:w-10/12"},null,8,["modelValue"])]),t("div",Me,[e[9]||(e[9]=t("span",{class:"flex-grow font-medium text-left sm:text-right"},"Tagline",-1)),r(k,{modelValue:a(o).tagline,"onUpdate:modelValue":e[1]||(e[1]=i=>a(o).tagline=i),class:"w-full sm:w-10/12"},null,8,["modelValue"])]),t("div",Ne,[e[11]||(e[11]=t("span",{class:"flex-grow font-medium text-left sm:text-right"},"Description",-1)),t("div",Ee,[r(ae,{modelValue:a(o).description,"onUpdate:modelValue":e[2]||(e[2]=i=>a(o).description=i),class:"w-full"},null,8,["modelValue"]),e[10]||(e[10]=t("label",{class:"text-xs text-gray-500"},"Maks. 50 Words",-1))])]),t("div",Le,[e[13]||(e[13]=t("span",{class:"flex-grow font-medium text-left sm:text-right"},"Package",-1)),r(le,{modelValue:a(o).package,"onUpdate:modelValue":e[3]||(e[3]=i=>a(o).package=i),options:a(P),placeholder:"Select Package",class:"w-full sm:w-10/12"},{label:y(()=>[t("div",Ge,[e[12]||(e[12]=t("span",{class:"inline-block h-2 w-2 flex-shrink-0 rounded-full bg-primary","aria-hidden":"true"},null,-1)),t("span",He,l(a(o).package.name),1)])]),option:y(({option:i})=>[t("div",We,[t("div",Qe,[t("span",{class:J([i.online?"bg-green-400":"bg-accent","inline-block h-2 w-2 flex-shrink-0 rounded-full"]),"aria-hidden":"true"},null,2)]),t("div",Xe,[t("span",Ye,l(i.name),1),t("span",Je," Paket "+l(i.duration)+" Bulan ",1),t("span",Ke,"Harga "+l(C(i.price)),1),t("span",Ze," Ukuran "+l(i.size_x)+" x "+l(i.size_y),1),t("span",et," Penayangan di "+l(i.route_json.map(V=>V.name).join(", ")),1)])])]),_:1},8,["modelValue","options"])]),t("div",tt,[e[14]||(e[14]=t("span",{class:"flex-grow font-medium text-left sm:text-right"}," Upload Image ",-1)),r(ze,{class:"w-full sm:w-10/12",title:"Ads Banner",accept:"images/*","max-size":"6291456",onFileUploaded:n})]),t("div",st,[r(B,{class:"w-full sm:w-10/12 bg-accent",block:"",onClick:se,disabled:a(S)},{default:y(()=>e[15]||(e[15]=[j(" Continue ")])),_:1},8,["disabled"])])])])):h("",!0),a(v)==="payment"?(c(),d("section",ot,[t("div",at,[t("div",lt,[e[16]||(e[16]=t("span",{class:"flex-grow font-medium"},"Preview",-1)),r(ne,{ui:{body:{padding:""}},class:"w-full sm:w-[600px] relative"},{default:y(()=>[t("img",{src:a(o).image_url,alt:"",class:"w-full h-full object-cover rounded-lg"},null,8,nt),t("div",it,[t("div",rt,[t("div",ct,[t("button",{onClick:e[4]||(e[4]=(...i)=>s.cancel&&s.cancel(...i)),class:"text-white bg-none"},[r(G,{name:"x"})])]),t("div",dt,[t("div",ut,[t("h6",mt,l(a(o).tagline),1),t("p",pt,l(a(o).description),1)])])])])]),_:1})]),a(o).status==="active"?(c(),d("div",ft,[e[22]||(e[22]=t("span",{class:"flex-grow font-medium"},"Advertisement Detail",-1)),t("div",xt,[e[17]||(e[17]=t("span",{class:"font-thin text-primary text-sm"}," Title ",-1)),t("h6",gt,l(a(o).name),1),e[18]||(e[18]=t("span",{class:"font-thin text-primary text-sm"}," Tagline ",-1)),t("h6",_t,l(a(o).tagline),1),e[19]||(e[19]=t("span",{class:"font-thin text-primary text-sm"}," Package ",-1)),t("h6",vt,l(a(o).package.name)+" ("+l(a(o).package.duration)+" Bulan) ",1),t("span",yt,l(C(a(o).package.price)),1),e[20]||(e[20]=t("span",{class:"font-thin text-primary text-sm"}," Status ",-1)),r(ie,{color:E(a(o).status).color,variant:"soft"},{default:y(()=>[j(l(E(a(o).status).text),1)]),_:1},8,["color"]),e[21]||(e[21]=t("span",{class:"font-thin text-primary text-sm"}," Valid Until ",-1)),t("h6",ht,l(a(o).valid_until_date?new Date(a(o).valid_until_date).toLocaleDateString():"-"),1)])])):(c(),d("div",wt,[e[26]||(e[26]=t("span",{class:"flex-grow font-medium"},"Payment Detail",-1)),t("div",kt,[e[25]||(e[25]=t("span",{class:"font-thin text-primary text-sm"}," Amount to be transfer : ",-1)),t("h6",bt,l(C(a(o).package.price)),1),t("span",Ut,l((W=a(w))==null?void 0:W.bank_account_name)+" Account ",1),t("h6",Ft,[j(l((Q=a(w))==null?void 0:Q.bank_account)+" ",1),t("b",St,"("+l((X=a(w))==null?void 0:X.bank)+")",1),r(B,{size:"xs",variant:"outline",color:"blue",onClick:e[5]||(e[5]=i=>{var V;return A((V=a(w))==null?void 0:V.bank_account)}),class:""},{default:y(()=>[r(G,{name:"copy",class:"text-lg"})]),_:1})]),t("span",Pt,l(a(_)?"Re":"")+" Upload Proof of Payment ",1),a(_)?(c(),d("div",Ct,[r(B,{color:"primary",class:"text-white py-3 rounded-lg my-1",onClick:e[6]||(e[6]=i=>_.value=!1)},{default:y(()=>[r(H,{name:"i-heroicons-arrow-path"}),e[23]||(e[23]=j(" Reupload "))]),_:1}),a(_)?(c(),N(B,{key:0,class:"text-white py-3 rounded-lg my-1 bg-accent hover:bg-accent-700",onClick:e[7]||(e[7]=i=>("navigateTo"in s?s.navigateTo:a(_e))({name:"my-client-orders",query:{section:"ads-history"}}))},{default:y(()=>[r(H,{name:"i-heroicons-megaphone"}),e[24]||(e[24]=j(" Other Ads History "))]),_:1})):h("",!0)])):(c(),N(re,{key:1,title:"Proof of Payment",accept:"*","max-size":"6291456",onFileUploaded:oe,class:"my-1"})),a(o).payment_file_url?(c(),d("span",$t," *Your transaction will be processed. Please wait for the verification process. ")):h("",!0)])]))])])):h("",!0)],4)]))])}}};export{Xt as default};
