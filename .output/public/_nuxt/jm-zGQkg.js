import{_ as ee}from"./BNtHcZP4.js";import{r as s,D as te,f as ae,h as D,o as c,c as q,b as o,w as n,a as t,d as i,z as x,a4 as g,l as y,m as N,t as oe,i as k,p as le,G as z}from"./XJk57Xzm.js";import{h as se}from"./C4JNI1D4.js";import{P as ne}from"./CaKezGkQ.js";import{_ as ie}from"./0oq0bqkJ.js";import{_ as re}from"./BzDEtBN7.js";import{_ as ce}from"./25-c76kT.js";import{_ as ue}from"./DKN0q9jN.js";import{_ as me}from"./ZSbHdXa8.js";import{_ as de}from"./B9XpIFX-.js";import{_ as pe}from"./B6173bGp.js";import{c as L,a as T}from"./SgLfJVpR.js";import{u as E}from"./1KzAzcSR.js";import"./BQdhZYq_.js";import"./DKK-teFl.js";import"./Y56T3AGQ.js";import"./DEmq8X_o.js";import"./CV2JBMnn.js";const fe={class:"h-full"},_e={class:"flex gap-2 mt-4"},ve={class:"flex items-center gap-2"},be={class:"flex items-center gap-2"},he={class:"flex items-center gap-2"},xe={__name:"MerchantForm",props:{merchant_id:{type:Number,required:!0}},setup(R){const{updateMyMerchant:w,setupMyMerchantService:V}=E(),v=R,u=L({type:L().required(),bank:T().required(),bank_account:T().required(),cv_url:T().required()}),l=s(1),m=te(),P=s(!1),C=ae(),M=[{id:"translator",name:"Translator"},{id:"interpreter",name:"Interpreter"}],j=[{id:"bca",name:"BCA"},{id:"bni",name:"BNI"},{id:"bri",name:"BRI"},{id:"mandiri",name:"Mandiri"}],b=s(M.find(a=>a.id==="translator")||M[0]),$=s(!1);s(null);const h=s(null),d=s(null),F=s(null),S=s([]),U=s([]),G=a=>{(a===-1||A(l.value))&&(l.value=l.value+a),m.push({query:{step:l.value}})},O={1:{conditions:[{check:()=>!b.value,message:"Please select a type"}]},2:{conditions:[{check:()=>!d.value,message:"Please select a valid bank"},{check:()=>!h.value,message:"Please fill in the bank account number"}]},3:{conditions:[{check:()=>!F.value,message:"Please upload your CV"}]}},A=a=>{const e=O[a];if(!e)return!1;let p=!0;return e.conditions.forEach(_=>{_.check()&&(W(_.message),p=!1,$.value=!0),$.value=!1}),p},W=a=>{C.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:a||"Please fill in the form correctly!"})},H=a=>{F.value=a},J=a=>{S.value=a},K=a=>{U.value=a},Q=async()=>{P.value=!0;const a={type:b.value.id,bank_id:d.value.id,bank:d.value.name,bank_account:`${h.value}`,cv_url:F.value,portfolios:S.value,certificates:U.value,merchant_id:v.merchant_id};try{await w(a),C.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Merchant setup successfully!"}),m.push({name:"my-merchant-status"})}catch(e){C.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:e.response.data.error.message})}finally{P.value=!1}};return D(async()=>{d.value=j[0]}),(a,e)=>{const p=ie,_=re,f=ce,X=ue,Y=me,I=de,B=le,Z=pe;return c(),q("div",fe,[o(Z,{"validation-schema":k(u),onSubmit:a.handleRegister,class:"h-full flex flex-col justify-between"},{default:n(()=>[t("div",null,[o(p,{name:"logo",filled:"",class:"text-4xl"}),e[10]||(e[10]=t("h6",{class:"text-2xl font-semibold text-primary max-w-sm py-3"},[i(" Welcome Our New "),t("br"),t("b",{class:"text-accent text-3xl"},"Facilitators"),i("! ")],-1)),x(t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-700 pb-3"},[i(" Please fill in the form below to get started "),t("br"),i(" to be a Gointerling facilitator. ")],-1)),o(f,{name:"type",label:"Tipe Fasilitator",class:"mb-2"},{default:n(()=>[o(_,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=r=>b.value=r),options:M,placeholder:"Pilih Tipe Fasilitator",by:"id","option-attribute":"name","search-attributes":["name"]},null,8,["modelValue"])]),_:1})],512),[[g,l.value===1]]),x(t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-700 pb-3"},[i(" Please fill in the form below to get started "),t("br"),i(" to be a Gointerling facilitator. ")],-1)),o(f,{name:"bank",label:"Nama Bank",class:"mb-2"},{default:n(()=>[o(_,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=r=>d.value=r),options:j,placeholder:"Pilih Nama Bank",by:"id","option-attribute":"name","search-attributes":["name"]},null,8,["modelValue"])]),_:1}),o(f,{name:"bank_account",label:"No Rekening",class:"mb-2"},{default:n(()=>[o(X,{type:"text",modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=r=>h.value=r),required:"",placeholder:"Masukkan No Rekening",class:"w-full",color:$.value?"red":"gray"},null,8,["modelValue","color"])]),_:1})],512),[[g,l.value===2]]),x(t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-700 pb-3"},[i(" Please fill in the form below to get started "),t("br"),i(" to be a Gointerling facilitator. ")],-1)),o(f,{name:"bank",label:"File CV (Max 6MB)",class:"mb-4"},{default:n(()=>[o(Y,{title:"CV",accept:"application/pdf","max-size":"6291456",onFileUploaded:H})]),_:1})],512),[[g,l.value===3]]),x(t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-700 pb-3"},[i(" Please fill in the form below to get started "),t("br"),i(" to be a Gointerling facilitator. ")],-1)),o(f,{name:"portfolios",label:"Portfolios",class:"mb-2"},{default:n(()=>[o(I,{title:"Portfolio",accept:"application/pdf","max-size":"6291456",onFileUploaded:J})]),_:1}),o(f,{name:"certificates",label:"Certificates ",class:"mb-2"},{default:n(()=>[o(I,{title:"Certificate",accept:"application/pdf","max-size":"6291456",onFileUploaded:K})]),_:1})],512),[[g,l.value===4]])]),t("div",_e,[l.value>1?(c(),y(B,{key:0,class:"bg-accent",onClick:e[3]||(e[3]=r=>G(-1))},{default:n(()=>[t("div",ve,[o(p,{name:"chevron-left"})])]),_:1})):N("",!0),l.value<4?(c(),y(B,{key:1,onClick:e[4]||(e[4]=r=>G(1))},{default:n(()=>[t("div",be,[e[11]||(e[11]=t("span",null,"Selanjutnya",-1)),o(p,{name:"chevron-right"})])]),_:1})):N("",!0),l.value===4?(c(),y(B,{key:2,onClick:e[5]||(e[5]=r=>Q()),loading:P.value},{default:n(()=>[t("div",he,[t("span",null,oe(S.value.length>0||U.value.length>0?"Finish Setup":"Skip for Now"),1)])]),_:1},8,["loading"])):N("",!0)])]),_:1},8,["validation-schema","onSubmit"])])}}},ge={key:1,class:"w-full h-screen flex items-center justify-center bg-slate-200"},ye={class:"flex gap-4 p-4 h-full"},ke={class:"flex align-middle justify-center items-center"},we=["src"],Ve={class:"px-6 min-w-[400px]"},Ee={__name:"onboarding",setup(R){const{getMyMerchants:w}=E(),V=s(!0),v=s(null);return D(async()=>{await w().then(u=>{const l=u.data.data.user.merchants[0].status,m=u.data.data.user.merchants[0].is_first_time;z("token").value.user.merchant_status=l,z("token").value.user.is_first_time=m,v.value=u.data.data.user.merchants[0].id,V.value=!1})}),(u,l)=>{const m=ee;return c(),q("div",null,[k(V)?(c(),y(ne,{key:0})):(c(),q("div",ge,[o(m,{ui:{body:{padding:"p-0",base:"h-full"}},class:"min-w-[750px] min-h-[400px] flex items-center justify-center"},{default:n(()=>[t("div",ye,[t("div",ke,[t("img",{src:k(se),width:"300px"},null,8,we)]),t("div",Ve,[o(xe,{merchant_id:k(v)},null,8,["merchant_id"])])])]),_:1})]))])}}};export{Ee as default};
