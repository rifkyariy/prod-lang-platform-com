import{_ as w}from"./0oq0bqkJ.js";import{f as D,r as n,o as a,c as i,a as p,b as y,t as h,m,q as $}from"./XJk57Xzm.js";import{u as E}from"./CV2JBMnn.js";const I=["accept"],M={key:0,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200"},O={key:1},V={class:"text-primary group-hover:text-white transition duration-200"},R={key:2,class:"mt-2 text-gray-700 text-xs"},j={key:3,class:"mt-2 text-red-500 text-xs"},A={__name:"FileUpload",props:{title:{type:String,default:"File"},accept:{type:String,default:""},maxSize:{type:Number,default:0},isDisplayFile:{type:Boolean,default:!0},center:{type:Boolean,default:!1}},emits:["fileUploaded"],setup(l,{emit:b}){const{uploadFile:F,deleteFile:k}=E(),c=l,d=D(),_=b,u=n(null),r=n(""),s=n(""),x=n(null),f=n(!1),S=()=>{u.value.click()},U=()=>{const e=u.value.files[0];e&&(r.value=e.name,c.maxSize&&e.size>c.maxSize?(s.value=`File size exceeds the limit of ${C(c.maxSize/1024/1024,2)} MB.`,r.value=""):(s.value="",B(e,`${c.title}_${e.name}`)))},z=()=>{u.value.value=null,r.value="",s.value="",N(x.value)},C=(e,t)=>+(Math.round(e+"e"+t)+"e-"+t),B=(e,t)=>{f.value=!0,F(e,t).then(o=>{f.value=!1,x.value=o.data.data.fileRecord,g(o.data.data.fileRecord.url),d.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File uploaded successfully!"})}).catch(o=>{console.error(o),d.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:v(o.response.data.error)})})},N=e=>{k(e.id).then(()=>{g(""),d.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"File deleted successfully!"})}).catch(t=>{console.error(t),d.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-exclamation-triangle",description:v(t.response.data.error)})})},g=e=>{_("fileUploaded",e)},v=e=>e.errors?e.errors[Object.keys(e.errors)[0]][0]:e.message;return(e,t)=>{const o=w;return a(),i("div",{class:$(["file-upload",l.center?"flex flex-col items-center":""])},[p("input",{ref_key:"fileInput",ref:u,type:"file",accept:l.accept,class:"hidden",onChange:U},null,40,I),f.value?(a(),i("button",M,t[0]||(t[0]=[p("span",{class:"text-primary group-hover:text-white transition duration-200"}," Uploading... ",-1)]))):(a(),i("div",O,[r.value?m("",!0):(a(),i("button",{key:0,onClick:S,class:"px-4 py-2 border border-primary rounded-lg hover:bg-primary flex items-center gap-1 group transition duration-200"},[y(o,{name:"file-upload",class:"text-primary group-hover:text-white transition duration-200"}),p("span",V," Upload "+h(l.title),1)])),r.value?(a(),i("button",{key:1,onClick:z,class:"px-4 py-2 border border-red-800 rounded-lg hover:bg-red-800 flex items-center gap-1 group transition duration-200"},[y(o,{name:"circle-x",class:"text-red-800 group-hover:text-white transition duration-200 mb-0 pb-0"}),t[1]||(t[1]=p("span",{class:"text-red-800 group-hover:text-white transition duration-200"}," Cancel ",-1))])):m("",!0)])),r.value&&l.isDisplayFile?(a(),i("p",R," Selected file: "+h(r.value),1)):m("",!0),s.value?(a(),i("p",j,h(s.value),1)):m("",!0)],2)}}};export{A as _};
