import{_ as ae}from"./0oq0bqkJ.js";import{f as le,E as oe,D as ne,r as n,Q as ie,g as W,h as re,G as U,c as i,l as A,b as l,a as e,F as L,s as M,i as ce,t as r,d as v,w as c,m as g,o,q as de,n as ue,p as me,C as pe,v as fe}from"./XJk57Xzm.js";import{_ as _e}from"./BzDEtBN7.js";import{_ as ve}from"./DKN0q9jN.js";import{_ as ge}from"./CrKBm7Us.js";import{_ as xe}from"./BNtHcZP4.js";import{P as ye}from"./CaKezGkQ.js";import{_ as he}from"./brHeAYbW.js";import"./BFtfbmKc.js";import{u as be}from"./Cg8Mu8Bz.js";import{u as we}from"./D42cKZAL.js";import"./BQdhZYq_.js";import"./DKK-teFl.js";import"./Y56T3AGQ.js";import"./DEmq8X_o.js";import"./Ck55vBbv.js";const ke={key:1,class:"w-full flex flex-col items-center"},Ce={class:"flex flex-col md:flex-row justify-between items-stretch w-11/12 my-16 gap-8 px-4 md:px-8 pt-16"},Ve={class:"w-full md:w-3/12"},je={class:"flex flex-col items-start mt-4"},Fe={class:"text-md text-primary"},Ae={class:"w-full md:w-9/12"},De={key:0,class:"w-full"},Pe={class:"font-semibold mb-3"},Ue={class:"flex flex-col md:flex-row gap-2 mb-4 justify-between"},Le={key:0,class:"flex w-full justify-center items-center py-4"},Me={key:1},ze={class:"flex flex-col gap-4"},Ie={class:"flex justify-between items-center"},Se={class:"flex items-center gap-2 capitalize"},Ne={class:"font-semibold"},Be={class:"flex justify-between items-center gap-2"},Te={class:"capitalize"},$e={class:"flex flex-row gap-3 justify-between items-center py-2"},Ee={class:"flex gap-3"},Oe={class:""},qe={class:"flex flex-col"},He={class:"font-semibold text-primary"},Re={class:"flex flex-wrap gap-2 text-xs text-gray-700"},Qe={class:"hidden md:block"},We={class:"font-semibold text-primary text-md"},Ge={key:0,class:"flex flex-col"},Je={key:1,class:"flex flex-col"},Ke={key:1,class:"w-full"},Xe={class:"font-semibold mb-3"},Ye={class:"flex flex-col md:flex-row gap-2 mb-4 justify-between"},Ze={key:0,class:"flex w-full justify-center items-center py-4"},et={key:1},tt={class:"flex flex-col gap-4"},st={class:"flex justify-between items-center"},at={class:"flex items-center gap-2 capitalize"},lt={class:"font-semibold"},ot={class:"flex justify-between items-center gap-2"},nt={class:"capitalize"},it={class:"flex flex-row gap-3 justify-between items-center py-2"},rt={class:"flex gap-3"},ct={class:""},dt={class:"flex flex-col"},ut={class:"font-semibold text-primary"},mt={class:"flex flex-wrap gap-2 text-xs text-gray-700"},pt={class:"font-semibold text-primary text-md"},ft={key:0,class:"flex flex-col"},_t={key:1,class:"flex flex-col"},Mt={__name:"index",setup(vt){le();const G=oe(),z=ne(),{getMyOrders:J}=be(),{getMyAds:K}=we();n(null);const X=[{key:"order-history",label:"Order History",icon:"user-circle",scope:"all"},{key:"ads-history",label:"Ads History",icon:"ads-report",scope:"all"}];n({title:"",content:"",confirmText:"",cancelText:"",callback:null});const I=n(!0);n(!1);const x=n(!1),p=n(!1),d=n("order-history"),f=n({fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}),D=n([]),P=n([]),_=n(5),y=n(!1),C=n(0),u=n({label:"All",value:"",color:"gray"}),m=n(""),Y=ie(()=>{if(!f.value)return[];const a=f.value.is_admin??!1,s=f.value.is_facilitator??!1;return X.filter(b=>b.scope==="all"||b.scope==="admin"&&a||b.scope==="merchant"&&s)}),V=a=>{switch(a){case"completed":return{color:"green",text:"Completed"};case"active":return{color:"blue",text:"Active"};case"paid":return{color:"blue",text:"In Progress"};case"pending":return{color:"orange",text:"Pending"};case"waitingpaid":return{color:"orange",text:"Waiting Payment & Verication"};case"failed":return{color:"red",text:"Failed"};default:return{color:"gray",text:"Unknown"}}},S=a=>{z.push(a)},Z=()=>{console.log("Logging out..."),U("token").value=null,f.value={fullname:"",photo:"",email:"",phone:"",address:"",role:"",personal_description:"",main_skills:[],additional_skills:[],is_admin:!1,is_facilitator:!1}},N=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a),B=async()=>{x.value=!0,_.value=_.value+5,h()},h=async()=>{d.value==="order-history"&&await $(),d.value==="ads-history"&&await E()},T=async()=>{p.value=!0,_.value=5,h()},ee=()=>{m.value="",_.value=5,y.value=!1,u.value={label:"All",value:"",color:"gray"}},te=async a=>{d.value=a,z.push({query:{section:a}}),p.value=!0,ee(),h()},se=async()=>{try{f.value=U("token").value.user||null}catch(a){console.error("Fetching user failed:",a)}},$=async()=>{try{const{data:a}=await J({page:1,per_page:_.value,order_status:u.value.value,search:m.value});D.value=a.data.orders.data,y.value=a.data.orders.current_page===a.data.orders.last_page,C.value=a.data.orders.total}catch(a){console.error("Fetching orders failed:",a)}finally{x.value=!1,p.value=!1}},E=async()=>{try{const{data:a}=await K({page:1,per_page:_.value,search:m.value,status:u.value.value});P.value=a.data.advertisements.data,y.value=a.data.advertisements.current_page===a.data.advertisements.last_page,C.value=a.data.advertisements.total}catch(a){console.error("Fetching orders failed:",a)}finally{x.value=!1,p.value=!1}};return W(u,async a=>{h()}),W(m,ue(async()=>{h()},300),{immediate:!0}),re(async()=>{d.value=G.query.section??"order-history",U("token").value&&(await se(),d.value==="order-history"&&await $(),d.value==="ads-history"&&await E()),I.value=!1,window.scrollTo({top:0,behavior:"smooth"})}),(a,s)=>{const b=ae,w=me,O=_e,q=ve,j=pe,H=ge,R=fe,F=xe;return o(),i("div",null,[I.value?(o(),A(ye,{key:0})):(o(),i("div",ke,[l(he,{user:f.value,onLogout:Z,class:"w-full"},null,8,["user"]),e("div",Ce,[e("div",Ve,[s[4]||(s[4]=e("h6",{class:"font-semibold"},"Client Dashboard",-1)),e("div",je,[(o(!0),i(L,null,M(ce(Y),(t,k)=>(o(),A(w,{key:k,block:"",class:de(["py-3 px-3.5 flex justify-start bg-white hover:bg-[#FDF1EE] shadow-none",d.value===t.key?"bg-[#FDF1EE]":"bg-white"]),onClick:Q=>te(t.key)},{default:c(()=>[l(b,{name:t.icon,class:"text-2xl text-primary"},null,8,["name"]),e("span",Fe,r(t.label),1)]),_:2},1032,["class","onClick"]))),128))])]),e("div",Ae,[d.value==="order-history"?(o(),i("div",De,[e("h6",Pe," My Order History ("+r(C.value??0)+") ",1),e("div",Ue,[l(O,{options:[{label:"All",value:"",color:"gray"},{label:"Completed",value:"completed",color:"blue"},{label:"In Progress",value:"paid",color:"green"},{label:"Waiting Payment & Verication",value:"waitingpaid",color:"orange"},{label:"Pending",value:"pending",color:"violet"},{label:"Failed",value:"failed",color:"red"}],modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),placeholder:"Status",by:"value","option-attribute":"label","search-attributes":["label"],onChange:T,class:"max-w-[180px]"},null,8,["modelValue"]),l(q,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Facilitator",modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t)},null,8,["modelValue"])]),p.value?(o(),i("div",Le,[l(j,{name:"i-ph-rocket-launch",dynamic:"",class:"text-xl text-gray-600"}),s[5]||(s[5]=v(" Loading Data... "))])):(o(),i("div",Me,[l(F,null,{default:c(()=>[e("div",ze,[(o(!0),i(L,null,M(D.value,(t,k)=>(o(),A(F,{key:k,ui:{header:{padding:"px-4 py-2 sm:px-3"},body:{padding:"px-4 py-0  sm:p-3"}}},{header:c(()=>[e("div",Ie,[e("div",Se,[l(j,{name:"i-heroicons-language"}),e("span",Ne,r(t.merchant.type),1)]),e("div",Be,[l(H,{variant:"soft",color:V(t.order_status).color},{default:c(()=>[e("span",Te,r(V(t.order_status).text),1)]),_:2},1032,["color"])])])]),default:c(()=>[e("div",$e,[e("div",Ee,[e("div",Oe,[l(R,{alt:t.merchant_user.fullname,src:t.merchant_user.photo,size:"lg",imgClass:"object-cover"},null,8,["alt","src"])]),e("div",qe,[e("span",He,r(t.merchant_user.fullname),1),e("div",Re,[e("span",Qe,r(t.service.name),1),e("span",null," ("+r(t.language_source.name)+" - "+r(t.language_destination.name)+") ",1),s[6]||(s[6]=e("span",{class:"hidden md:block"},"x 1",-1))]),e("span",We,r(N(t.price)),1)])]),l(w,{color:"primary",class:"text-white mr-4",onClick:Q=>S({name:"my-client-orders-id",params:{id:t.id}})},{default:c(()=>s[7]||(s[7]=[v(" Detail ")])),_:2},1032,["onClick"])])]),_:2},1024))),128)),D.value.length===0?(o(),i("div",Ge,s[8]||(s[8]=[e("div",{class:"flex flex-col items-center justify-center"},[e("span",{class:"text-gray-400"},"No orders found")],-1)]))):g("",!0),y.value?g("",!0):(o(),i("div",Je,[l(w,{block:"",onClick:B,class:"mt-4 bg-accent",loading:x.value},{default:c(()=>s[9]||(s[9]=[v(" Load More ")])),_:1},8,["loading"])]))])]),_:1})]))])):g("",!0),d.value==="ads-history"?(o(),i("div",Ke,[e("h6",Xe," My Ads History ("+r(C.value??0)+") ",1),e("div",Ye,[l(O,{options:[{label:"All",value:"",color:"gray"},{label:"Active",value:"active",color:"blue"},{label:"Pending",value:"pending",color:"orange"},{label:"Inactive",value:"inactive",color:"red"}],modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=t=>u.value=t),placeholder:"Status",by:"value","option-attribute":"label","search-attributes":["label"],onChange:T,class:"max-w-[180px]"},null,8,["modelValue"]),l(q,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Ads",modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=t=>m.value=t)},null,8,["modelValue"])]),p.value?(o(),i("div",Ze,[l(j,{name:"i-ph-rocket-launch",dynamic:"",class:"text-xl text-gray-600"}),s[10]||(s[10]=v(" Loading Data... "))])):(o(),i("div",et,[l(F,null,{default:c(()=>[e("div",tt,[(o(!0),i(L,null,M(P.value,(t,k)=>(o(),A(F,{key:k,ui:{header:{padding:"px-4 py-2 sm:px-3"},body:{padding:"px-4 py-0  sm:p-3"}}},{header:c(()=>[e("div",st,[e("div",at,[l(j,{name:"i-heroicons-megaphone"}),e("span",lt,r(t.package.name),1)]),e("div",ot,[l(H,{variant:"soft",color:V(t.status).color},{default:c(()=>[e("span",nt,r(V(t.status).text),1)]),_:2},1032,["color"])])])]),default:c(()=>[e("div",it,[e("div",rt,[e("div",ct,[l(R,{alt:t.name,src:t.image_url,size:"lg",imgClass:"object-cover"},null,8,["alt","src"])]),e("div",dt,[e("span",ut,r(t.name),1),e("div",mt,[e("span",null,r(t.tagline),1),s[11]||(s[11]=e("span",null,"x 1",-1))]),e("span",pt,r(N(t.package.price)),1)])]),l(w,{color:"primary",class:"text-white mr-4",onClick:Q=>S({name:"ads-setup",query:{transaction_id:t.id,section:"payment"}})},{default:c(()=>s[12]||(s[12]=[v(" Detail ")])),_:2},1032,["onClick"])])]),_:2},1024))),128)),P.value.length===0?(o(),i("div",ft,s[13]||(s[13]=[e("div",{class:"flex flex-col items-center justify-center"},[e("span",{class:"text-gray-400"},"No advertisements found")],-1)]))):g("",!0),y.value?g("",!0):(o(),i("div",_t,[l(w,{block:"",onClick:B,class:"mt-4 bg-accent",loading:x.value},{default:c(()=>s[14]||(s[14]=[v(" Load More ")])),_:1},8,["loading"])]))])]),_:1})]))])):g("",!0)])])]))])}}};export{Mt as default};
