import{_ as oe}from"./DDJzJDlt.js";import{_ as ne}from"./B6lnNECk.js";import{_ as se}from"./Bk0utM0A.js";import{_ as le}from"./CizdsbHW.js";import{f as ie,r as d,g as ce,h as re,c as l,b as s,w as n,j as ue,o,a as i,t as c,i as pe,l as f,d as v,q as U,m as D,F as I,s as E,p as de,v as me}from"./BEkH225l.js";import{_ as _e}from"./DswlE1Sz.js";import{_ as fe,a as ge}from"./Cot1NOBN.js";import{_ as ve}from"./lkxIL6El.js";import{_ as he}from"./DVmWxMly.js";import{u as be}from"./CK0fJW16.js";import"./DwxjmMYL.js";import"./Bk5CjwjX.js";import"./E4AWPTk2.js";import"./DJQezgFW.js";import"./BkpIvrcg.js";import"./BNh9XT_a.js";const xe={class:"w-full pt-0 p-6 flex flex-col gap-2"},ye={class:"flex gap-2"},ke={key:1,class:"text-gray-300"},Ce={class:"flex gap-3 items-center"},Ve=["onClick"],Pe={class:"flex flex-col"},ze={class:"font-semibold text-primary"},Se={class:"font-semibold text-primary py-1 capitalize"},Ue={class:"text-sm text-gray-600"},De={key:0,class:"flex gap-1 flex-col"},$e={class:"flex gap-1 items-center"},Ne={class:"font-semibold text-primary"},Te={key:1,class:"text-gray-300"},Me={class:"flex gap-1 flex-col"},Ae={class:"font-semibold text-primary"},Oe={key:0},Le={key:0,class:"text-sm text-red-500"},Be={key:1,class:"text-gray-300"},Fe={key:1,class:"text-gray-300"},Ie={key:0,class:"text-gray-300"},Ee={key:1,class:"text-gray-300"},je={key:0,class:"text-gray-300"},qe={key:1,class:"text-gray-300"},Je={class:"flex gap-1"},Ke="Facilitators List",ct={__name:"merchants",setup(He){const{getMerchants:j,updateMerchantStatus:q}=be(),k=ie(),$=d(!0),P=d(!1),N=d({title:"",message:"",callback:null}),T=d([]),h=d({label:"All",value:"all"}),C=d(""),b=d(1),z=d({page:1,totalPage:1,totalItems:0,itemsPerPage:10}),J=[[{key:"completed",label:"Completed",icon:"i-heroicons-check",callback:()=>{console.log("completed")}}],[{key:"uncompleted",label:"In Progress",icon:"i-heroicons-arrow-path",callback:()=>{console.log("uncompleted")}}]],V=async()=>{try{await j({page:b.value,per_page:z.value.itemsPerPage,status:h.value.value==="all"?"":h.value.value,search:C.value}).then(t=>{T.value=t.data.data.data.map((a,p)=>({id:p+1,user:{id:a.id,fullname:a.fullname,email:a.email,photo:a.photo,type:a.merchants[0].type},phone:K(a.phone??""),subscription:a.merchants[0].subscription_packages[0]??{name:"No Subscription",duration:0,pivot:{is_valid:!1,is_trial:!1,valid_until:null}},bank:{bank:a.merchants[0].bank,bankAccount:a.merchants[0].bank_account},CV:a.merchants[0].cv_url,portfolio:JSON.parse(a.merchants[0].portfolios),certificate:JSON.parse(a.merchants[0].certificates),status:a.merchants[0].status,actions:J})),z.value={page:t.data.data.current_page,totalPage:t.data.data.last_page,totalItems:t.data.data.total,itemsPerPage:t.data.data.per_page}})}catch(t){console.error("Error fetching facilitators:",t)}finally{$.value=!1}},K=t=>(t=t.replace(/\D/g,""),t.startsWith("0")?`62${t.slice(1)}`:t),M=t=>(console.log(t),new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})),H=t=>t>1?t+" Months":t+" Month",A=t=>new Date(t)<new Date?"expired":new Date(t)<new Date(new Date().getTime()+7*24*60*60*1e3)?"near-expired":"valid",Q=(t,a)=>a&&t?"Trial":t?"Active":"Pending";ce(b,V);const O=()=>{V(b.value,h.value.value,C.value)},R=W(()=>{O()},500);function W(t,a,p){let m;return function(){const g=this,_=arguments,r=function(){m=null,t.apply(g,_)};clearTimeout(m),m=setTimeout(r,a)}}const x=t=>{t?window.open(t,"_blank"):k.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:"Link is empty!"})},G=t=>{navigator.clipboard.writeText(t),k.add({title:"Copied!",color:"green",icon:"i-heroicons-check-circle",description:"No Rekening copied to clipboard!"})},X=t=>t==="verified"?"blue":t==="pending"?"orange":"gray",L=(t,a,p,m,g)=>{N.value={title:t,content:a,confirmText:p,cancelText:m,callback:g},P.value=!0},B=async(t,a)=>{await q(t,a).then(()=>{P.value=!1,k.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"User status updated successfully!"}),V()}).catch(p=>{console.error("Error updating user status:",p),k.add({title:"Uh Oh!",color:"red",icon:"i-heroicons-x-circle",description:"Error updating user status!"})})};return re(()=>{V()}),(t,a)=>{const p=oe,m=ne,g=se,_=le,r=de,Y=me,S=_e,F=fe,Z=ve,w=ge,ee=ue,te=he;return o(),l("div",null,[s(ee,{name:"admin"},{default:n(()=>[i("div",xe,[s(g,{ui:{body:{base:"flex justify-between items-center",background:"",padding:"p-2 sm:p-4"}}},{default:n(()=>[i("h6",{class:"font-semibold"},c(Ke)),i("div",ye,[s(p,{options:[{label:"All",value:"all",color:"gray"},{label:"Verified",value:"verified",color:"blue"},{label:"Pending",value:"pending",color:"orange"}],modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),placeholder:"Pilih Status",by:"value","option-attribute":"label","search-attributes":["label"],onChange:O,class:"max-w-[180px]"},null,8,["modelValue"]),s(m,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Facilitator",modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value=e),onInput:a[2]||(a[2]=e=>pe(R)())},null,8,["modelValue"])])]),_:1}),s(g,{ui:{body:{base:"flex flex-col gap-4"}}},{default:n(()=>[s(Z,{rows:T.value,loading:$.value,"loading-state":{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."}},{"phone-data":n(({row:e})=>[e.phone?(o(),f(r,{key:0,target:"_blank",size:"sm",color:"green",trailing:!1,onClick:u=>x(`https://wa.me/${e.phone}`)},{default:n(()=>[s(_,{name:"whatsapp",class:"text-white"}),v(" "+c(e.phone),1)]),_:2},1032,["onClick"])):(o(),l("span",ke," Kosong "))]),"user-data":n(({row:e})=>[i("div",Ce,[i("data",{class:"cursor-pointer",onClick:u=>x(e.user.photo)},[s(Y,{src:e.user.photo,alt:e.user.fullname,size:"sm",variant:"rounded-full",imgClass:"object-cover"},null,8,["src","alt"])],8,Ve),i("div",Pe,[i("span",ze,[s(S,{size:"xs",label:e.user.type,color:e.user.type==="interpreter"?"emerald":"blue",variant:"subtle",class:"capitalize"},null,8,["label","color"])]),i("span",Se,c(e.user.fullname),1),i("span",Ue,c(e.user.email),1)])])]),"bank-data":n(({row:e})=>[e.bank.bank?(o(),l("div",De,[i("div",$e,[i("span",Ne," Bank "+c(e.bank.bank),1),s(r,{size:"xs",variant:"outline",color:"blue",onClick:u=>G(e.bank.bankAccount),class:""},{default:n(()=>[s(_,{name:"copy",class:"text-xs"})]),_:2},1032,["onClick"])]),i("span",null,c(e.bank.bankAccount),1)])):(o(),l("span",Te," Kosong "))]),"status-data":n(({row:e})=>[s(S,{size:"xs",label:e.status,color:X(e.status),variant:"subtle",class:"capitalize"},null,8,["label","color"])]),"type-data":n(({row:e})=>[s(S,{size:"xs",label:e.type,color:e.type==="interpreter"?"emerald":"blue",variant:"subtle",class:"capitalize"},null,8,["label","color"])]),"subscription-data":n(({row:e})=>[i("div",Me,[i("span",Ae,c(e.subscription.name)+" ( "+c(H(e.subscription.duration))+" ) ",1),i("span",null,c(Q(e.subscription.pivot.is_valid,e.subscription.pivot.is_trial)),1),e.subscription.pivot.is_valid?(o(),l("div",Oe,[A(e.subscription.pivot.valid_until)==="expired"?(o(),l("span",Le,[a[4]||(a[4]=v(" Expired ")),i("b",null," : "+c(M(e.subscription.pivot.valid_until)),1)])):(o(),l("span",{key:1,class:U(A(e.subscription.pivot.valid_until)==="near-expired"?"text-orange-500":"text-green-500")}," Valid Until : "+c(M(e.subscription.pivot.valid_until)),3))])):(o(),l("div",Be,[e.bank.bank?(o(),f(r,{key:0,variant:"soft",color:"blue",icon:"i-heroicons-document-check"},{default:n(()=>a[5]||(a[5]=[v(" Verify Subscription ")])),_:1})):D("",!0)]))])]),"CV-data":n(({row:e})=>[e.CV?(o(),f(r,{key:0,size:"sm",color:"accent",trailing:!1,onClick:u=>x(e.CV)},{default:n(()=>[s(_,{name:"file",class:"text-white"}),a[6]||(a[6]=v(" Open CV "))]),_:2},1032,["onClick"])):(o(),l("span",Fe," No CV "))]),"portfolio-data":n(({row:e})=>[e.portfolio?(o(),l("div",{key:0,class:U(["flex gap-1 flex-col justify-center",e.portfolio.length===0?"items-start":"items-center"])},[(o(!0),l(I,null,E(e.portfolio,(u,y)=>(o(),f(r,{key:y,size:"sm",color:"accent",trailing:!1,onClick:ae=>x(u)},{default:n(()=>[s(_,{name:"file",class:"text-white"}),v(" Portfolio "+c(y+1),1)]),_:2},1032,["onClick"]))),128)),e.portfolio.length===0?(o(),l("span",Ie," No Portfolio ")):D("",!0)],2)):(o(),l("span",Ee," No Portfolio "))]),"certificate-data":n(({row:e})=>[e.certificate?(o(),l("div",{key:0,class:U(["flex gap-1 flex-col justify-center",e.certificate.length===0?"items-start":"items-center"])},[(o(!0),l(I,null,E(e.certificate,(u,y)=>(o(),f(r,{key:y,size:"sm",color:"accent",trailing:!1,onClick:ae=>x(u)},{default:n(()=>[s(_,{name:"file",class:"text-white"}),v(" Certificate "+c(y+1),1)]),_:2},1032,["onClick"]))),128)),e.certificate.length===0?(o(),l("span",je," No Certificate ")):D("",!0)],2)):(o(),l("span",qe," No Certificate "))]),"actions-data":n(({row:e})=>[i("div",Je,[e.status==="verified"?(o(),f(F,{key:0,text:"Deactive"},{default:n(()=>[s(r,{icon:"i-heroicons-trash",size:"2xs",color:"orange",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:u=>L("Hang On","Are you sure you want to deactivate this facilitator?","Deactivate","Cancel",()=>{B(e.user.id,"inactive")})},null,8,["onClick"])]),_:2},1024)):(o(),f(F,{key:1,text:"Verify"},{default:n(()=>[s(r,{icon:"i-heroicons-check",size:"2xs",color:"emerald",variant:"outline",ui:{rounded:"rounded-full"},square:"",onClick:u=>L("Verify Facilitator","Are you sure you want to verify this facilitator?","Verify","Cancel",()=>{B(e.user.id,"verified")})},null,8,["onClick"])]),_:2},1024))])]),_:1},8,["rows","loading"]),s(w,{modelValue:b.value,"onUpdate:modelValue":a[3]||(a[3]=e=>b.value=e),"page-count":1,total:z.value.totalPage},null,8,["modelValue","total"])]),_:1})])]),_:1}),s(te,{isOpen:P.value,data:N.value},null,8,["isOpen","data"])])}}};export{ct as default};
