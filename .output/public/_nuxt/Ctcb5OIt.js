import{f as E,r as c,g as C,h as L,c as p,b as o,w as s,i as n,j,o as m,d as k,a as i,t as G,C as F,p as I}from"./BEkH225l.js";import{_ as $}from"./B6lnNECk.js";import{_ as M}from"./Bk0utM0A.js";import{_ as D}from"./ki6bLwiE.js";import{_ as O}from"./DDJzJDlt.js";import{_ as T}from"./DZJ46zT2.js";import{_ as q}from"./DVmWxMly.js";import{u as z}from"./CQA2cOXQ.js";import"./DJQezgFW.js";import"./DwxjmMYL.js";import"./Bk5CjwjX.js";import"./E4AWPTk2.js";import"./CizdsbHW.js";import"./x_mdr1ZB.js";import"./BNh9XT_a.js";const H={key:0,class:"text-gray-500 flex justify-center items-center h-full gap-2"},P={key:1,class:"w-full pt-0 p-6 flex flex-col gap-2"},Q={class:"flex gap-2"},R={class:"flex gap-4"},Y=["src"],J={class:"flex gap-2 flex-col"},K="Settings",me={__name:"settings",setup(W){const{getSetting:y,updateSetting:v}=z(),_=E(),g=c(!0),u=c(!1),x=c(!1),h=c({title:"",message:"",callback:null}),f=[{id:"bca",name:"BCA"},{id:"bni",name:"BNI"},{id:"bri",name:"BRI"},{id:"mandiri",name:"Mandiri"}],e=c({title:"",logo:"https://dev-api.gointerling.com/storage/uploads/oEwc2avbfrCEn3Gb4CSaytNjGcul3UGqHxES7wrA.svg",bank:"",bank_account:"",bank_account_name:""}),S=a=>{e.value.logo=a};C(()=>e.value,()=>{e.value.logo===""&&(e.value.logo="https://dev-api.gointerling.com/storage/uploads/oEwc2avbfrCEn3Gb4CSaytNjGcul3UGqHxES7wrA.svg")},{deep:!0});const V=async()=>{try{const{data:a}=await y();e.value=a.data.setting,e.value.bank=f.find(t=>t.id===a.data.setting.bank)}catch(a){console.error("Error fetching merchant orders:",a)}finally{g.value=!1}},w=async()=>{u.value=!0;try{const a={title:e.value.title,logo:e.value.logo,bank:e.value.bank.id,bank_account:`${e.value.bank_account}`,bank_account_name:e.value.bank_account_name},{data:t}=await v(a);_.add({title:"Success!",color:"green",icon:"i-heroicons-check-circle",description:"Setting updated successfully!"})}catch(a){console.error("Error updating setting:",a),_.add({title:"Error",color:"red",description:"Failed to update setting.",type:"error"})}finally{u.value=!1}};return L(()=>{V()}),(a,t)=>{const U=F,d=$,b=M,r=D,B=O,A=I,N=j;return m(),p("div",null,[o(N,{name:"admin"},{default:s(()=>[n(g)?(m(),p("div",H,[o(U,{name:"i-ph-rocket-launch",dynamic:"",class:"text-xl text-gray-600"}),t[5]||(t[5]=k(" Loading Setting... "))])):(m(),p("div",P,[o(b,{ui:{body:{base:"flex justify-between items-center",background:"",padding:"p-2 sm:p-4"}}},{default:s(()=>[i("h6",{class:"font-semibold"},G(K)),i("div",Q,[o(d,{icon:"i-heroicons-magnifying-glass-20-solid",size:"sm",color:"white",trailing:!1,placeholder:"Search Settings",modelValue:a.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=l=>a.searchQuery=l)},null,8,["modelValue"])])]),_:1}),o(b,{ui:{body:{base:"flex justify-between items-center",background:"",padding:"p-2 sm:p-6"}}},{default:s(()=>[i("div",R,[i("img",{src:n(e).logo,class:"w-24 h-24 object-cover rounded-lg border border-primary p-2"},null,8,Y),i("div",J,[o(r,{label:"Apps Name"},{default:s(()=>[o(d,{placeholder:"Your Apps Name",modelValue:n(e).title,"onUpdate:modelValue":t[1]||(t[1]=l=>n(e).title=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"Logo"},{default:s(()=>[o(T,{title:"Logo",accept:"image/*","max-size":"6291456",onFileUploaded:S})]),_:1}),o(r,{label:"Bank"},{default:s(()=>[o(B,{modelValue:n(e).bank,"onUpdate:modelValue":t[2]||(t[2]=l=>n(e).bank=l),options:f,placeholder:"Fill Provider",by:"id","option-attribute":"name","search-attributes":["name"]},null,8,["modelValue"])]),_:1}),o(r,{label:"Bank Account"},{default:s(()=>[o(d,{placeholder:"Fill Bank Account",type:"text",modelValue:n(e).bank_account,"onUpdate:modelValue":t[3]||(t[3]=l=>n(e).bank_account=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"Bank Account Name"},{default:s(()=>[o(d,{placeholder:"Fill Bank Account Name",modelValue:n(e).bank_account_name,"onUpdate:modelValue":t[4]||(t[4]=l=>n(e).bank_account_name=l)},null,8,["modelValue"])]),_:1}),t[7]||(t[7]=i("hr",{class:"my-2"},null,-1)),o(A,{color:"primary",onClick:w,block:"",loading:n(u)},{default:s(()=>t[6]||(t[6]=[k(" Save ")])),_:1},8,["loading"])])])]),_:1})]))]),_:1}),o(q,{isOpen:n(x),data:n(h)},null,8,["isOpen","data"])])}}};export{me as default};
